<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <link rel="stylesheet" href="./src/main.css">
    <link rel="stylesheet" href="./src/audiovisual.css">
    <script src="./src/play.js" charset="utf-8"></script>
    <script src="./src/audiovisual.js" charset="utf-8"></script>
    <script src="./src/desktop.js" charset="utf-8"></script>
    <title>Music Player</title>
  </head>
  <body onkeydown="keypress(event);" onload="onload();">
    <!--
    http://i3.ytimg.com/vi/ VIDEO ID /maxresdefault.jpg
    http://i3.ytimg.com/vi/lL33M9e-g8Q/maxresdefault.jpg
    -->
    <div id="sidebar" class="sidebar" onmouseover="onMenuHover();" onmouseout="offMenuHover();" hover="true">
      <h1 id="title">Music Player</h1>
      <div class="music-list" id="music-list">
        <!--?php
        $list = array();
        $path = "./music/";
        $files = scandir($path);
        $toJson = array();
        $in = 2;
        for ($i = 2; $i < count($files); $i++) {
          if (strtolower(substr($files[$i],-4)) == ".mp3") {
            array_push($toJson, $path.$files[$i]);
            $parts = explode(" - ", $files[$i]);
            if (count($parts) > 1) {
              $list[$i-$in] = array(
                "artist" => $parts[0],
                "title" => substr($parts[1], 0, strlen($parts[1])-4)
              );
            }
            else {
              $list[$i-$in] = array(
                "artist" => "Unknown",
                "title" => substr($parts[0], 0, strlen($parts[0])-4)
              );
            }
          }
          else {
            $in++;
          }
        }

        echo
        "<script class=\"delete_this\">
          songs = ".json_encode($toJson).";
          var _x = document.getElementsByClassName(\"delete_this\")[0];
          //_x.parentNode.remove(childNodes[0]);
        </script>";

        //sort($list);
        foreach ($list as $id => $data) {
          echo "<div title=\"".$data["artist"]." - ".$data["title"]."\"class=\"music-item\" id=\"music-".$id."\" onclick=\"playSong(".$id.");\"><p>";
          echo $data["artist"]." - ".$data["title"];
          echo "</p></div>";
        }
        ?-->
      </div>
    </div>
    <div id="content">
      <canvas id="canvas"></canvas>
    </div>
  </body>
  <div class="player">
    <div id="now-playing" class="now-playing">
      <p id="song-title">text</p>
      <progress id="curTime" value="0" max="100" onmousedown="changeProgress(event);"></progress>
    </div>
    <div id="play" class="play" onclick="playToggle();" mode="stop"></div>
    <audio id="musicObject" src="" onended="musicEnd();" canplay="isReady = true;"></audio>
  </div>
  <footer></footer>
</html>
